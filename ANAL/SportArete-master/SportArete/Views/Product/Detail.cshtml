@model DetailedProductViewModel

@{
    ViewBag.Title = Model.Brand + " " + Model.Model;
}

<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://code.jquery.com/jquery-3.4.1.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <style>
        centered {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
        }
    </style>
</head>

<body>
    <div class="centered">
        <div class="d-flex">
            <div class="containerDetail">
                <div class="imgBxDetail">
                    <img class="imgDetail" src="@Model.ImageData" alt="Product Image">
                </div>
                <div class="detailsDetail">
                    <div class="contentDetail">
                        <h2>
                            @ViewBag.Title
                            <br>
                            <span> @Model.Brand</span>
                        </h2>
                        <p>@Model.Description</p>
                       
                        <p class="product-colorsDetail">
                            Available Sizes:
                            @if (@Model.Category == "Clothing" || Model.Category == "Shoes")
                            {
                                <h5>@Model.Size EU</h5>
                            }
                            else
                            {
                                <h5>@Model.Size</h5>
                            }
                        </p>

                        <h3>
                            @Model.Price BGN
                        </h3>
                         <div class="rating">
                            @if (Model.Reviews.Count() != 0)
                            {

                                @foreach (var review in Model.Reviews)
                                {
                                    <div class="reviewBox">

                                        <h6>Star Rating</h6>
                                        @for (int i = review.Rating; i > 0; i--)
                                        {
                                            <span class="fa fa-star checked"></span>
                                        }
                                        @for (int i = review.Rating; i < 5; i++)
                                        {
                                            <span class="fa fa-star"></span>
                                        }

                                        <p>@review.Comment</p>
                                        <p>Review by: @review.UserName</p>
                                    </div>
                                }
                                @if (!Model.Reviews.Any(x => x.UserName == User.Identity.Name))
                                {
                                    <button type="button" class="button">
                                        <div>
                                            <a asp-area="" asp-controller="Product" asp-action="AddReview" asp-route-id="@Model.Id">Review the product</a>
                                        </div>
                                    </button>
                                }
                            }
                            else
                            {
                                <p>There are no reviews for this product.</p>
                                @if (User.Identity.IsAuthenticated)
                                {
                                    <p>Be the first one to add a review!</p>

                                        <div>
                                            <a asp-area="" asp-controller="Product" asp-action="AddReview" asp-route-id="@Model.Id">
                                            <button>Review the product</button>
                                        </a>
                                        </div>
                                }
                            }
                        </div>
                        <div class="product-colors">
                            <form asp-controller="Cart" asp-action="Add" asp-route-productId="@Model.Id" method="post">
                                <button>Add To Cart</button>
                            </form>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Change The Picture and Associated Element Color when Color Options Are Clicked.
        $(".product-colorsDetail span").click(function () {
            $(".product-colorsDetail span").removeClass("activeDetail");
            $(this).addClass("activeDetail");
            $(".activeDetail").css("border-color", $(this).attr("data-color-sec"))
            $("body").css("background", $(this).attr("data-color-primary"));
            $(".contentDetail h2").css("color", $(this).attr("data-color-sec"));
            $(".contentDetail h3").css("color", $(this).attr("data-color-sec"));
            $(".containerDetail .imgBxDetail").css("background", $(this).attr("data-color-sec"));
            $(".containerDetail .detailsDetail buttonDetail").css("background", $(this).attr("data-color-sec"));
            $(".imgBxDetail imgDetail").attr('src', $(this).attr("data-pic"));
        });
    </script>

</body>

</html>
